<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="ZZCOLLAB Development Team" />

<meta name="date" content="2025-10-02" />

<title>Reproducible Data Analysis with ZZCOLLAB: A Palmer Penguins Tutorial</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Reproducible Data Analysis with ZZCOLLAB: A
Palmer Penguins Tutorial</h1>
<h4 class="author">ZZCOLLAB Development Team</h4>
<h4 class="date">2025-10-02</h4>


<div id="TOC">
<ul>
<li><a href="#introduction" id="toc-introduction">Introduction</a>
<ul>
<li><a href="#learning-objectives" id="toc-learning-objectives">Learning
Objectives</a></li>
<li><a href="#system-requirements" id="toc-system-requirements">System
Requirements</a></li>
</ul></li>
<li><a href="#build-mode-selection" id="toc-build-mode-selection">Build
Mode Selection</a>
<ul>
<li><a href="#build-mode-specifications" id="toc-build-mode-specifications">Build Mode Specifications</a></li>
<li><a href="#project-initialization" id="toc-project-initialization">Project Initialization</a></li>
<li><a href="#initialization-process" id="toc-initialization-process">Initialization Process</a></li>
<li><a href="#dotfiles-integration" id="toc-dotfiles-integration">Dotfiles Integration</a></li>
</ul></li>
<li><a href="#data-organization-and-provenance" id="toc-data-organization-and-provenance">Data Organization and
Provenance</a>
<ul>
<li><a href="#directory-structure" id="toc-directory-structure">Directory Structure</a></li>
<li><a href="#raw-data-acquisition" id="toc-raw-data-acquisition">Raw
Data Acquisition</a></li>
<li><a href="#data-provenance-documentation" id="toc-data-provenance-documentation">Data Provenance
Documentation</a></li>
<li><a href="#data-dictionary-development" id="toc-data-dictionary-development">Data Dictionary
Development</a></li>
</ul></li>
<li><a href="#data-validation-testing" id="toc-data-validation-testing">Data Validation Testing</a>
<ul>
<li><a href="#testing-rationale" id="toc-testing-rationale">Testing
Rationale</a></li>
<li><a href="#test-implementation" id="toc-test-implementation">Test
Implementation</a></li>
<li><a href="#test-execution" id="toc-test-execution">Test
Execution</a></li>
</ul></li>
<li><a href="#container-environment-usage" id="toc-container-environment-usage">Container Environment Usage</a>
<ul>
<li><a href="#container-initialization" id="toc-container-initialization">Container Initialization</a></li>
<li><a href="#alternative-entry-methods" id="toc-alternative-entry-methods">Alternative Entry Methods</a></li>
<li><a href="#environment-verification" id="toc-environment-verification">Environment Verification</a></li>
</ul></li>
<li><a href="#data-preparation-workflow" id="toc-data-preparation-workflow">Data Preparation Workflow</a>
<ul>
<li><a href="#preparation-function-development" id="toc-preparation-function-development">Preparation Function
Development</a></li>
<li><a href="#preparation-execution" id="toc-preparation-execution">Preparation Execution</a></li>
<li><a href="#derived-data-documentation" id="toc-derived-data-documentation">Derived Data Documentation</a></li>
<li><a href="#test-execution-1" id="toc-test-execution-1">Test
Execution</a></li>
</ul></li>
<li><a href="#container-exit-procedures" id="toc-container-exit-procedures">Container Exit Procedures</a>
<ul>
<li><a href="#exit-methods" id="toc-exit-methods">Exit Methods</a></li>
<li><a href="#data-persistence" id="toc-data-persistence">Data
Persistence</a></li>
<li><a href="#verification-of-persistence" id="toc-verification-of-persistence">Verification of
Persistence</a></li>
</ul></li>
<li><a href="#complete-analysis-example" id="toc-complete-analysis-example">Complete Analysis Example</a>
<ul>
<li><a href="#analysis-script-development" id="toc-analysis-script-development">Analysis Script
Development</a></li>
<li><a href="#analysis-execution" id="toc-analysis-execution">Analysis
Execution</a></li>
<li><a href="#results-examination" id="toc-results-examination">Results
Examination</a></li>
</ul></li>
<li><a href="#version-control-integration" id="toc-version-control-integration">Version Control
Integration</a></li>
<li><a href="#workflow-summary" id="toc-workflow-summary">Workflow
Summary</a>
<ul>
<li><a href="#command-reference" id="toc-command-reference">Command
Reference</a></li>
<li><a href="#build-mode-comparison" id="toc-build-mode-comparison">Build Mode Comparison</a></li>
<li><a href="#data-directory-functions" id="toc-data-directory-functions">Data Directory Functions</a></li>
</ul></li>
<li><a href="#conclusion" id="toc-conclusion">Conclusion</a>
<ul>
<li><a href="#additional-resources" id="toc-additional-resources">Additional Resources</a></li>
<li><a href="#collaborative-workflow" id="toc-collaborative-workflow">Collaborative Workflow</a></li>
</ul></li>
<li><a href="#references" id="toc-references">References</a></li>
</ul>
</div>

<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This tutorial provides a systematic approach to establishing a
reproducible research workflow using the ZZCOLLAB framework. The Palmer
Penguins dataset (Gorman et al., 2014) serves as an illustrative example
for implementing computational reproducibility practices in data
analysis.</p>
<div id="learning-objectives" class="section level2">
<h2>Learning Objectives</h2>
<p>Upon completion of this tutorial, researchers will be able to:</p>
<ol style="list-style-type: decimal">
<li>Initialize a containerized research project with appropriate
dependency management</li>
<li>Implement proper data organization separating immutable raw data
from derived datasets</li>
<li>Develop comprehensive validation tests for data integrity</li>
<li>Navigate between host and container environments for development
workflows</li>
<li>Integrate personal configuration files into containerized
environments</li>
<li>Document data transformations following research reproducibility
standards</li>
</ol>
</div>
<div id="system-requirements" class="section level2">
<h2>System Requirements</h2>
<p>The following software components must be installed and
configured:</p>
<ul>
<li>Docker Desktop (version 20.10 or later)</li>
<li>ZZCOLLAB framework (installed in system PATH)</li>
<li>Git version control system (configured with user credentials)</li>
<li>(Optional) Personal dotfiles repository for shell customization</li>
</ul>
</div>
</div>
<div id="build-mode-selection" class="section level1">
<h1>Build Mode Selection</h1>
<p>ZZCOLLAB provides three build modes representing different levels of
pre-installed R package dependencies. Selection depends on project
computational requirements and build time constraints.</p>
<div id="build-mode-specifications" class="section level2">
<h2>Build Mode Specifications</h2>
<p><strong>Fast Mode</strong> (<code>-F</code>): Minimal dependency
environment (9 packages)</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Core development and testing infrastructure</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">renv,</span> here, usethis, devtools, testthat, knitr, rmarkdown, targets</span></code></pre></div>
<p><strong>Standard Mode</strong> (<code>-S</code>): Balanced
environment for typical analyses (17 packages)</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Fast Mode packages plus tidyverse core components</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="ex">+</span> dplyr, ggplot2, tidyr, palmerpenguins, broom, janitor, DT,</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="ex">conflicted</span></span></code></pre></div>
<p><strong>Comprehensive Mode</strong> (<code>-C</code>): Extended
environment for complex workflows (47 packages)</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Standard Mode packages plus specialized tools</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">+</span> tidymodels, shiny, plotly, quarto, flexdashboard, survival, lme4,</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>  <span class="ex">database</span> connectors, parallel processing libraries</span></code></pre></div>
</div>
<div id="project-initialization" class="section level2">
<h2>Project Initialization</h2>
<p>For this Palmer Penguins analysis, Standard Mode provides necessary
dependencies including the palmerpenguins package and tidyverse
ecosystem:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Navigate to project workspace</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="bu">cd</span> ~/projects</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># Initialize with Standard Mode</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="ex">zzcollab</span> <span class="at">-S</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="co"># Alternative: Specify explicit project name</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="ex">zzcollab</span> <span class="at">-S</span> <span class="at">-p</span> penguin-analysis</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co"># Include personal shell configuration</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="ex">zzcollab</span> <span class="at">-S</span> <span class="at">-d</span> ~/dotfiles</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co"># Include team namespace for collaborative work</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="ex">zzcollab</span> <span class="at">-S</span> <span class="at">-t</span> myname <span class="at">-p</span> penguin-analysis <span class="at">-d</span> ~/dotfiles</span></code></pre></div>
</div>
<div id="initialization-process" class="section level2">
<h2>Initialization Process</h2>
<p>The initialization procedure performs the following operations:</p>
<ol style="list-style-type: decimal">
<li>Creates R package directory structure (R/, tests/, vignettes/)</li>
<li>Establishes data organization hierarchy (raw_data/,
derived_data/)</li>
<li>Builds Docker image with specified package dependencies</li>
<li>Configures testing framework using testthat</li>
<li>Generates data documentation templates</li>
<li>Creates GitHub Actions workflow definitions</li>
<li>Copies dotfiles to container environment (if specified)</li>
</ol>
</div>
<div id="dotfiles-integration" class="section level2">
<h2>Dotfiles Integration</h2>
<p>Specifying the <code>-d</code> flag copies personal configuration
files into the container environment, preserving familiar development
settings:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Typical dotfiles directory structure</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">~/dotfiles/</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="ex">├──</span> .zshrc          <span class="co"># Zsh shell configuration</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="ex">├──</span> .bashrc         <span class="co"># Bash shell configuration</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="ex">├──</span> .vimrc          <span class="co"># Vim editor settings</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="ex">├──</span> .tmux.conf      <span class="co"># Terminal multiplexer configuration</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="ex">└──</span> .gitconfig      <span class="co"># Git configuration</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co"># Files are copied to container home directory</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co"># Enabling consistent shell behavior across environments</span></span></code></pre></div>
<p>Benefits of dotfiles integration:</p>
<ul>
<li>Preservation of custom shell aliases and functions</li>
<li>Consistent editor configuration across environments</li>
<li>Git identity and alias configuration</li>
<li>Personal productivity tool availability</li>
</ul>
</div>
</div>
<div id="data-organization-and-provenance" class="section level1">
<h1>Data Organization and Provenance</h1>
<p>Proper data management requires strict separation between original
data sources and derived analytical datasets.</p>
<div id="directory-structure" class="section level2">
<h2>Directory Structure</h2>
<p>ZZCOLLAB implements the following data organization hierarchy:</p>
<pre><code>penguin-analysis/
├── data/
│   ├── raw_data/           # Immutable original data files
│   ├── derived_data/       # Processed analysis-ready datasets
│   ├── metadata/           # Data dictionaries and codebooks
│   ├── validation/         # Quality assessment reports
│   ├── README.md           # Data documentation
│   └── DATA_WORKFLOW_GUIDE.md  # Processing workflow documentation</code></pre>
</div>
<div id="raw-data-acquisition" class="section level2">
<h2>Raw Data Acquisition</h2>
<p>Navigate to the project directory:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">cd</span> ~/projects/penguin-analysis</span></code></pre></div>
<p>For this tutorial, we export the Palmer Penguins dataset from the R
package to demonstrate proper raw data handling:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Execute from host environment (outside container)</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">&quot;library(palmerpenguins); </span><span class="dt">\</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="st">      write.csv(penguins, &#39;data/raw_data/penguins_raw.csv&#39;, </span><span class="dt">\</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="st">                row.names = FALSE)&quot;</span></span></code></pre></div>
<p>Verify successful data placement:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-lh</span> data/raw_data/</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co"># Expected output:</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co"># -rw-r--r--  1 user  staff   14K Oct  2 15:30 penguins_raw.csv</span></span></code></pre></div>
</div>
<div id="data-provenance-documentation" class="section level2">
<h2>Data Provenance Documentation</h2>
<p>Complete documentation of data sources enables verification and
citation:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">vim</span> data/README.md</span></code></pre></div>
<p>Add the following metadata to the Data Sources section:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">## Data Sources and Provenance</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">### penguins_raw.csv</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="ss">- </span>**Source**: Palmer Archipelago (Antarctica) Long Term Ecological</span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>  Research (LTER) Program</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="ss">- </span>**Collection Period**: 2007-2009</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="ss">- </span>**Acquisition Date**: 2025-10-02</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="ss">- </span>**Original Location**: palmerpenguins R package (version 0.1.1)</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="ss">- </span>**DOI**: https://doi.org/10.1371/journal.pone.0090081</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="ss">- </span>**Citation**: Gorman KB, Williams TD, Fraser WR (2014) Ecological</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>  Sexual Dimorphism and Environmental Variability within a Community</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a>  of Antarctic Penguins (Genus Pygoscelis). PLoS ONE 9(3): e90081.</span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="ss">- </span>**File Size**: 14 KB</span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="ss">- </span>**MD5 Checksum**: <span class="co">[</span><span class="ot">compute via md5sum data/raw_data/penguins_raw.csv</span><span class="co">]</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="ss">- </span>**Observations**: 344 individuals</span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="ss">- </span>**Variables**: 8 measurements</span></code></pre></div>
</div>
<div id="data-dictionary-development" class="section level2">
<h2>Data Dictionary Development</h2>
<p>Comprehensive variable documentation facilitates proper
interpretation:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">## Data Dictionary</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="fu">### penguins_raw.csv</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="pp">|</span> Variable          <span class="pp">|</span> Type    <span class="pp">|</span> Description                   <span class="pp">|</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="pp">|-------------------|---------|-------------------------------|</span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="pp">|</span> species           <span class="pp">|</span> Factor  <span class="pp">|</span> Penguin species               <span class="pp">|</span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="pp">|</span>                   <span class="pp">|</span>         <span class="pp">|</span> (Adelie, Chinstrap, Gentoo)   <span class="pp">|</span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="pp">|</span> island            <span class="pp">|</span> Factor  <span class="pp">|</span> Island location               <span class="pp">|</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="pp">|</span>                   <span class="pp">|</span>         <span class="pp">|</span> (Biscoe, Dream, Torgersen)    <span class="pp">|</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="pp">|</span> bill_length_mm    <span class="pp">|</span> Numeric <span class="pp">|</span> Culmen length                 <span class="pp">|</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="pp">|</span> bill_depth_mm     <span class="pp">|</span> Numeric <span class="pp">|</span> Culmen depth                  <span class="pp">|</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="pp">|</span> flipper_length_mm <span class="pp">|</span> Integer <span class="pp">|</span> Flipper length                <span class="pp">|</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="pp">|</span> body_mass_g       <span class="pp">|</span> Integer <span class="pp">|</span> Body mass                     <span class="pp">|</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="pp">|</span> sex               <span class="pp">|</span> Factor  <span class="pp">|</span> Individual sex                <span class="pp">|</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="pp">|</span>                   <span class="pp">|</span>         <span class="pp">|</span> (male, female)                <span class="pp">|</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="pp">|</span> year              <span class="pp">|</span> Integer <span class="pp">|</span> Study year                    <span class="pp">|</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="pp">|</span> Variable          <span class="pp">|</span> Units <span class="pp">|</span> Valid Range <span class="pp">|</span> Missing Codes <span class="pp">|</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="pp">|-------------------|-------|-------------|---------------|</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a><span class="pp">|</span> species           <span class="pp">|</span> -     <span class="pp">|</span> 3 levels    <span class="pp">|</span> NA            <span class="pp">|</span></span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a><span class="pp">|</span> island            <span class="pp">|</span> -     <span class="pp">|</span> 3 levels    <span class="pp">|</span> NA            <span class="pp">|</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a><span class="pp">|</span> bill_length_mm    <span class="pp">|</span> mm    <span class="pp">|</span> 30-60       <span class="pp">|</span> NA            <span class="pp">|</span></span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a><span class="pp">|</span> bill_depth_mm     <span class="pp">|</span> mm    <span class="pp">|</span> 13-22       <span class="pp">|</span> NA            <span class="pp">|</span></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a><span class="pp">|</span> flipper_length_mm <span class="pp">|</span> mm    <span class="pp">|</span> 170-235     <span class="pp">|</span> NA            <span class="pp">|</span></span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a><span class="pp">|</span> body_mass_g       <span class="pp">|</span> g     <span class="pp">|</span> 2700-6300   <span class="pp">|</span> NA            <span class="pp">|</span></span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a><span class="pp">|</span> sex               <span class="pp">|</span> -     <span class="pp">|</span> 2 levels    <span class="pp">|</span> NA            <span class="pp">|</span></span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a><span class="pp">|</span> year              <span class="pp">|</span> year  <span class="pp">|</span> 2007-2009   <span class="pp">|</span> NA            <span class="pp">|</span></span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a></span>
<span id="cb12-30"><a href="#cb12-30" tabindex="-1"></a><span class="fu">### Missing Data Summary</span></span>
<span id="cb12-31"><a href="#cb12-31" tabindex="-1"></a></span>
<span id="cb12-32"><a href="#cb12-32" tabindex="-1"></a><span class="ss">- </span>bill_length_mm: 2 missing (0.6%)</span>
<span id="cb12-33"><a href="#cb12-33" tabindex="-1"></a><span class="ss">- </span>bill_depth_mm: 2 missing (0.6%)</span>
<span id="cb12-34"><a href="#cb12-34" tabindex="-1"></a><span class="ss">- </span>flipper_length_mm: 2 missing (0.6%)</span>
<span id="cb12-35"><a href="#cb12-35" tabindex="-1"></a><span class="ss">- </span>body_mass_g: 2 missing (0.6%)</span>
<span id="cb12-36"><a href="#cb12-36" tabindex="-1"></a><span class="ss">- </span>sex: 11 missing (3.2%)</span>
<span id="cb12-37"><a href="#cb12-37" tabindex="-1"></a><span class="ss">- </span>Total observations: 344 penguins</span></code></pre></div>
</div>
</div>
<div id="data-validation-testing" class="section level1">
<h1>Data Validation Testing</h1>
<p>Automated testing ensures raw data integrity and detects unauthorized
modifications to immutable source files.</p>
<div id="testing-rationale" class="section level2">
<h2>Testing Rationale</h2>
<p>From the data workflow documentation:</p>
<blockquote>
<p>Data validation testing prevents silent errors that compromise
research integrity. Tests serve multiple functions: detecting accidental
modifications, validating quality assumptions, documenting expected
properties, and enabling reproducible research workflows.</p>
</blockquote>
</div>
<div id="test-implementation" class="section level2">
<h2>Test Implementation</h2>
<p>Create comprehensive validation tests:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Execute from host environment</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="ex">vim</span> tests/testthat/test-raw-data-validation.R</span></code></pre></div>
<p>Implement the following test suite:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># tests/testthat/test-raw-data-validation.R</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">library</span>(testthat)</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#=======================================================================</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co"># RAW DATA VALIDATION TESTS</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#=======================================================================</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co"># Purpose: Ensure raw data maintains unchanging characteristics</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co"># Rationale: Raw data immutability requires validation against</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a><span class="co">#            accidental modifications</span></span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a></span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;penguins raw data file exists and is accessible&quot;</span>, {</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>  data_file <span class="ot">&lt;-</span> <span class="st">&quot;data/raw_data/penguins_raw.csv&quot;</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a></span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a>  <span class="co"># Verify file existence</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a>    <span class="fu">file.exists</span>(data_file),</span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Raw data file must exist at specified location&quot;</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a>  )</span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a>  <span class="co"># Verify file readability</span></span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a>  <span class="fu">expect_no_error</span>({</span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(data_file)</span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a>  }, <span class="at">info =</span> <span class="st">&quot;Raw data file must be readable without errors&quot;</span>)</span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a>})</span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;penguins raw data has expected structure&quot;</span>, {</span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/raw_data/penguins_raw.csv&quot;</span>)</span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a></span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a>  <span class="co"># Validate observation count (raw data invariant)</span></span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a>    <span class="fu">nrow</span>(data), <span class="dv">344</span>,</span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Raw data must contain exactly 344 observations&quot;</span></span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a>  )</span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a></span>
<span id="cb14-35"><a href="#cb14-35" tabindex="-1"></a>  <span class="co"># Validate variable count</span></span>
<span id="cb14-36"><a href="#cb14-36" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-37"><a href="#cb14-37" tabindex="-1"></a>    <span class="fu">ncol</span>(data), <span class="dv">8</span>,</span>
<span id="cb14-38"><a href="#cb14-38" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Raw data must contain exactly 8 variables&quot;</span></span>
<span id="cb14-39"><a href="#cb14-39" tabindex="-1"></a>  )</span>
<span id="cb14-40"><a href="#cb14-40" tabindex="-1"></a></span>
<span id="cb14-41"><a href="#cb14-41" tabindex="-1"></a>  <span class="co"># Validate column names and ordering</span></span>
<span id="cb14-42"><a href="#cb14-42" tabindex="-1"></a>  expected_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb14-43"><a href="#cb14-43" tabindex="-1"></a>    <span class="st">&quot;species&quot;</span>, <span class="st">&quot;island&quot;</span>, <span class="st">&quot;bill_length_mm&quot;</span>, <span class="st">&quot;bill_depth_mm&quot;</span>,</span>
<span id="cb14-44"><a href="#cb14-44" tabindex="-1"></a>    <span class="st">&quot;flipper_length_mm&quot;</span>, <span class="st">&quot;body_mass_g&quot;</span>, <span class="st">&quot;sex&quot;</span>, <span class="st">&quot;year&quot;</span></span>
<span id="cb14-45"><a href="#cb14-45" tabindex="-1"></a>  )</span>
<span id="cb14-46"><a href="#cb14-46" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-47"><a href="#cb14-47" tabindex="-1"></a>    <span class="fu">names</span>(data), expected_cols,</span>
<span id="cb14-48"><a href="#cb14-48" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Column names and order must match specification&quot;</span></span>
<span id="cb14-49"><a href="#cb14-49" tabindex="-1"></a>  )</span>
<span id="cb14-50"><a href="#cb14-50" tabindex="-1"></a>})</span>
<span id="cb14-51"><a href="#cb14-51" tabindex="-1"></a></span>
<span id="cb14-52"><a href="#cb14-52" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;penguins raw data has expected data types&quot;</span>, {</span>
<span id="cb14-53"><a href="#cb14-53" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(</span>
<span id="cb14-54"><a href="#cb14-54" tabindex="-1"></a>    <span class="st">&quot;data/raw_data/penguins_raw.csv&quot;</span>,</span>
<span id="cb14-55"><a href="#cb14-55" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span></span>
<span id="cb14-56"><a href="#cb14-56" tabindex="-1"></a>  )</span>
<span id="cb14-57"><a href="#cb14-57" tabindex="-1"></a></span>
<span id="cb14-58"><a href="#cb14-58" tabindex="-1"></a>  <span class="co"># Validate categorical variables</span></span>
<span id="cb14-59"><a href="#cb14-59" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-60"><a href="#cb14-60" tabindex="-1"></a>    <span class="fu">is.factor</span>(data<span class="sc">$</span>species),</span>
<span id="cb14-61"><a href="#cb14-61" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Species must be factor type&quot;</span></span>
<span id="cb14-62"><a href="#cb14-62" tabindex="-1"></a>  )</span>
<span id="cb14-63"><a href="#cb14-63" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-64"><a href="#cb14-64" tabindex="-1"></a>    <span class="fu">is.factor</span>(data<span class="sc">$</span>island),</span>
<span id="cb14-65"><a href="#cb14-65" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Island must be factor type&quot;</span></span>
<span id="cb14-66"><a href="#cb14-66" tabindex="-1"></a>  )</span>
<span id="cb14-67"><a href="#cb14-67" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-68"><a href="#cb14-68" tabindex="-1"></a>    <span class="fu">is.factor</span>(data<span class="sc">$</span>sex),</span>
<span id="cb14-69"><a href="#cb14-69" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Sex must be factor type&quot;</span></span>
<span id="cb14-70"><a href="#cb14-70" tabindex="-1"></a>  )</span>
<span id="cb14-71"><a href="#cb14-71" tabindex="-1"></a></span>
<span id="cb14-72"><a href="#cb14-72" tabindex="-1"></a>  <span class="co"># Validate numeric variables</span></span>
<span id="cb14-73"><a href="#cb14-73" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-74"><a href="#cb14-74" tabindex="-1"></a>    <span class="fu">is.numeric</span>(data<span class="sc">$</span>bill_length_mm),</span>
<span id="cb14-75"><a href="#cb14-75" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Bill length must be numeric type&quot;</span></span>
<span id="cb14-76"><a href="#cb14-76" tabindex="-1"></a>  )</span>
<span id="cb14-77"><a href="#cb14-77" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-78"><a href="#cb14-78" tabindex="-1"></a>    <span class="fu">is.numeric</span>(data<span class="sc">$</span>bill_depth_mm),</span>
<span id="cb14-79"><a href="#cb14-79" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Bill depth must be numeric type&quot;</span></span>
<span id="cb14-80"><a href="#cb14-80" tabindex="-1"></a>  )</span>
<span id="cb14-81"><a href="#cb14-81" tabindex="-1"></a></span>
<span id="cb14-82"><a href="#cb14-82" tabindex="-1"></a>  <span class="co"># Validate integer variables</span></span>
<span id="cb14-83"><a href="#cb14-83" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-84"><a href="#cb14-84" tabindex="-1"></a>    <span class="fu">is.integer</span>(data<span class="sc">$</span>flipper_length_mm),</span>
<span id="cb14-85"><a href="#cb14-85" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Flipper length must be integer type&quot;</span></span>
<span id="cb14-86"><a href="#cb14-86" tabindex="-1"></a>  )</span>
<span id="cb14-87"><a href="#cb14-87" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-88"><a href="#cb14-88" tabindex="-1"></a>    <span class="fu">is.integer</span>(data<span class="sc">$</span>body_mass_g),</span>
<span id="cb14-89"><a href="#cb14-89" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Body mass must be integer type&quot;</span></span>
<span id="cb14-90"><a href="#cb14-90" tabindex="-1"></a>  )</span>
<span id="cb14-91"><a href="#cb14-91" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-92"><a href="#cb14-92" tabindex="-1"></a>    <span class="fu">is.integer</span>(data<span class="sc">$</span>year),</span>
<span id="cb14-93"><a href="#cb14-93" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Year must be integer type&quot;</span></span>
<span id="cb14-94"><a href="#cb14-94" tabindex="-1"></a>  )</span>
<span id="cb14-95"><a href="#cb14-95" tabindex="-1"></a>})</span>
<span id="cb14-96"><a href="#cb14-96" tabindex="-1"></a></span>
<span id="cb14-97"><a href="#cb14-97" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;penguins raw data has expected factor levels&quot;</span>, {</span>
<span id="cb14-98"><a href="#cb14-98" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(</span>
<span id="cb14-99"><a href="#cb14-99" tabindex="-1"></a>    <span class="st">&quot;data/raw_data/penguins_raw.csv&quot;</span>,</span>
<span id="cb14-100"><a href="#cb14-100" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span></span>
<span id="cb14-101"><a href="#cb14-101" tabindex="-1"></a>  )</span>
<span id="cb14-102"><a href="#cb14-102" tabindex="-1"></a></span>
<span id="cb14-103"><a href="#cb14-103" tabindex="-1"></a>  <span class="co"># Validate species levels</span></span>
<span id="cb14-104"><a href="#cb14-104" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-105"><a href="#cb14-105" tabindex="-1"></a>    <span class="fu">levels</span>(data<span class="sc">$</span>species),</span>
<span id="cb14-106"><a href="#cb14-106" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>),</span>
<span id="cb14-107"><a href="#cb14-107" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Species must have three levels in alphabetical order&quot;</span></span>
<span id="cb14-108"><a href="#cb14-108" tabindex="-1"></a>  )</span>
<span id="cb14-109"><a href="#cb14-109" tabindex="-1"></a></span>
<span id="cb14-110"><a href="#cb14-110" tabindex="-1"></a>  <span class="co"># Validate island levels</span></span>
<span id="cb14-111"><a href="#cb14-111" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-112"><a href="#cb14-112" tabindex="-1"></a>    <span class="fu">levels</span>(data<span class="sc">$</span>island),</span>
<span id="cb14-113"><a href="#cb14-113" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;Biscoe&quot;</span>, <span class="st">&quot;Dream&quot;</span>, <span class="st">&quot;Torgersen&quot;</span>),</span>
<span id="cb14-114"><a href="#cb14-114" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Island must have three levels in alphabetical order&quot;</span></span>
<span id="cb14-115"><a href="#cb14-115" tabindex="-1"></a>  )</span>
<span id="cb14-116"><a href="#cb14-116" tabindex="-1"></a></span>
<span id="cb14-117"><a href="#cb14-117" tabindex="-1"></a>  <span class="co"># Validate sex levels</span></span>
<span id="cb14-118"><a href="#cb14-118" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-119"><a href="#cb14-119" tabindex="-1"></a>    <span class="fu">levels</span>(data<span class="sc">$</span>sex),</span>
<span id="cb14-120"><a href="#cb14-120" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;female&quot;</span>, <span class="st">&quot;male&quot;</span>),</span>
<span id="cb14-121"><a href="#cb14-121" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Sex must have two levels in alphabetical order&quot;</span></span>
<span id="cb14-122"><a href="#cb14-122" tabindex="-1"></a>  )</span>
<span id="cb14-123"><a href="#cb14-123" tabindex="-1"></a>})</span>
<span id="cb14-124"><a href="#cb14-124" tabindex="-1"></a></span>
<span id="cb14-125"><a href="#cb14-125" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;penguins raw data values within expected ranges&quot;</span>, {</span>
<span id="cb14-126"><a href="#cb14-126" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/raw_data/penguins_raw.csv&quot;</span>)</span>
<span id="cb14-127"><a href="#cb14-127" tabindex="-1"></a></span>
<span id="cb14-128"><a href="#cb14-128" tabindex="-1"></a>  <span class="co"># Remove NA values for range validation</span></span>
<span id="cb14-129"><a href="#cb14-129" tabindex="-1"></a>  bill_length <span class="ot">&lt;-</span></span>
<span id="cb14-130"><a href="#cb14-130" tabindex="-1"></a>    data<span class="sc">$</span>bill_length_mm[<span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>bill_length_mm)]</span>
<span id="cb14-131"><a href="#cb14-131" tabindex="-1"></a>  bill_depth <span class="ot">&lt;-</span></span>
<span id="cb14-132"><a href="#cb14-132" tabindex="-1"></a>    data<span class="sc">$</span>bill_depth_mm[<span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>bill_depth_mm)]</span>
<span id="cb14-133"><a href="#cb14-133" tabindex="-1"></a>  flipper <span class="ot">&lt;-</span></span>
<span id="cb14-134"><a href="#cb14-134" tabindex="-1"></a>    data<span class="sc">$</span>flipper_length_mm[<span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>flipper_length_mm)]</span>
<span id="cb14-135"><a href="#cb14-135" tabindex="-1"></a>  body_mass <span class="ot">&lt;-</span></span>
<span id="cb14-136"><a href="#cb14-136" tabindex="-1"></a>    data<span class="sc">$</span>body_mass_g[<span class="sc">!</span><span class="fu">is.na</span>(data<span class="sc">$</span>body_mass_g)]</span>
<span id="cb14-137"><a href="#cb14-137" tabindex="-1"></a></span>
<span id="cb14-138"><a href="#cb14-138" tabindex="-1"></a>  <span class="co"># Validate bill length (biologically plausible range)</span></span>
<span id="cb14-139"><a href="#cb14-139" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-140"><a href="#cb14-140" tabindex="-1"></a>    <span class="fu">all</span>(bill_length <span class="sc">&gt;=</span> <span class="dv">30</span> <span class="sc">&amp;</span> bill_length <span class="sc">&lt;=</span> <span class="dv">60</span>),</span>
<span id="cb14-141"><a href="#cb14-141" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Bill length must be within 30-60mm range&quot;</span></span>
<span id="cb14-142"><a href="#cb14-142" tabindex="-1"></a>  )</span>
<span id="cb14-143"><a href="#cb14-143" tabindex="-1"></a></span>
<span id="cb14-144"><a href="#cb14-144" tabindex="-1"></a>  <span class="co"># Validate bill depth</span></span>
<span id="cb14-145"><a href="#cb14-145" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-146"><a href="#cb14-146" tabindex="-1"></a>    <span class="fu">all</span>(bill_depth <span class="sc">&gt;=</span> <span class="dv">13</span> <span class="sc">&amp;</span> bill_depth <span class="sc">&lt;=</span> <span class="dv">22</span>),</span>
<span id="cb14-147"><a href="#cb14-147" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Bill depth must be within 13-22mm range&quot;</span></span>
<span id="cb14-148"><a href="#cb14-148" tabindex="-1"></a>  )</span>
<span id="cb14-149"><a href="#cb14-149" tabindex="-1"></a></span>
<span id="cb14-150"><a href="#cb14-150" tabindex="-1"></a>  <span class="co"># Validate flipper length</span></span>
<span id="cb14-151"><a href="#cb14-151" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-152"><a href="#cb14-152" tabindex="-1"></a>    <span class="fu">all</span>(flipper <span class="sc">&gt;=</span> <span class="dv">170</span> <span class="sc">&amp;</span> flipper <span class="sc">&lt;=</span> <span class="dv">235</span>),</span>
<span id="cb14-153"><a href="#cb14-153" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Flipper length must be within 170-235mm range&quot;</span></span>
<span id="cb14-154"><a href="#cb14-154" tabindex="-1"></a>  )</span>
<span id="cb14-155"><a href="#cb14-155" tabindex="-1"></a></span>
<span id="cb14-156"><a href="#cb14-156" tabindex="-1"></a>  <span class="co"># Validate body mass</span></span>
<span id="cb14-157"><a href="#cb14-157" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-158"><a href="#cb14-158" tabindex="-1"></a>    <span class="fu">all</span>(body_mass <span class="sc">&gt;=</span> <span class="dv">2700</span> <span class="sc">&amp;</span> body_mass <span class="sc">&lt;=</span> <span class="dv">6300</span>),</span>
<span id="cb14-159"><a href="#cb14-159" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Body mass must be within 2700-6300g range&quot;</span></span>
<span id="cb14-160"><a href="#cb14-160" tabindex="-1"></a>  )</span>
<span id="cb14-161"><a href="#cb14-161" tabindex="-1"></a></span>
<span id="cb14-162"><a href="#cb14-162" tabindex="-1"></a>  <span class="co"># Validate study years</span></span>
<span id="cb14-163"><a href="#cb14-163" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-164"><a href="#cb14-164" tabindex="-1"></a>    <span class="fu">all</span>(data<span class="sc">$</span>year <span class="sc">&gt;=</span> <span class="dv">2007</span> <span class="sc">&amp;</span> data<span class="sc">$</span>year <span class="sc">&lt;=</span> <span class="dv">2009</span>),</span>
<span id="cb14-165"><a href="#cb14-165" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Study years must be within 2007-2009 period&quot;</span></span>
<span id="cb14-166"><a href="#cb14-166" tabindex="-1"></a>  )</span>
<span id="cb14-167"><a href="#cb14-167" tabindex="-1"></a>})</span>
<span id="cb14-168"><a href="#cb14-168" tabindex="-1"></a></span>
<span id="cb14-169"><a href="#cb14-169" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;penguins raw data has expected missing pattern&quot;</span>, {</span>
<span id="cb14-170"><a href="#cb14-170" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/raw_data/penguins_raw.csv&quot;</span>)</span>
<span id="cb14-171"><a href="#cb14-171" tabindex="-1"></a></span>
<span id="cb14-172"><a href="#cb14-172" tabindex="-1"></a>  <span class="co"># Quantify missing values per variable</span></span>
<span id="cb14-173"><a href="#cb14-173" tabindex="-1"></a>  missing_counts <span class="ot">&lt;-</span> <span class="fu">colSums</span>(<span class="fu">is.na</span>(data))</span>
<span id="cb14-174"><a href="#cb14-174" tabindex="-1"></a></span>
<span id="cb14-175"><a href="#cb14-175" tabindex="-1"></a>  <span class="co"># Validate morphometric measurements (2 missing each)</span></span>
<span id="cb14-176"><a href="#cb14-176" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-177"><a href="#cb14-177" tabindex="-1"></a>    missing_counts[<span class="st">&quot;bill_length_mm&quot;</span>], <span class="dv">2</span>,</span>
<span id="cb14-178"><a href="#cb14-178" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Bill length must have exactly 2 missing values&quot;</span></span>
<span id="cb14-179"><a href="#cb14-179" tabindex="-1"></a>  )</span>
<span id="cb14-180"><a href="#cb14-180" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-181"><a href="#cb14-181" tabindex="-1"></a>    missing_counts[<span class="st">&quot;bill_depth_mm&quot;</span>], <span class="dv">2</span>,</span>
<span id="cb14-182"><a href="#cb14-182" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Bill depth must have exactly 2 missing values&quot;</span></span>
<span id="cb14-183"><a href="#cb14-183" tabindex="-1"></a>  )</span>
<span id="cb14-184"><a href="#cb14-184" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-185"><a href="#cb14-185" tabindex="-1"></a>    missing_counts[<span class="st">&quot;flipper_length_mm&quot;</span>], <span class="dv">2</span>,</span>
<span id="cb14-186"><a href="#cb14-186" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Flipper length must have exactly 2 missing values&quot;</span></span>
<span id="cb14-187"><a href="#cb14-187" tabindex="-1"></a>  )</span>
<span id="cb14-188"><a href="#cb14-188" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-189"><a href="#cb14-189" tabindex="-1"></a>    missing_counts[<span class="st">&quot;body_mass_g&quot;</span>], <span class="dv">2</span>,</span>
<span id="cb14-190"><a href="#cb14-190" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Body mass must have exactly 2 missing values&quot;</span></span>
<span id="cb14-191"><a href="#cb14-191" tabindex="-1"></a>  )</span>
<span id="cb14-192"><a href="#cb14-192" tabindex="-1"></a></span>
<span id="cb14-193"><a href="#cb14-193" tabindex="-1"></a>  <span class="co"># Validate sex variable (11 missing)</span></span>
<span id="cb14-194"><a href="#cb14-194" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-195"><a href="#cb14-195" tabindex="-1"></a>    missing_counts[<span class="st">&quot;sex&quot;</span>], <span class="dv">11</span>,</span>
<span id="cb14-196"><a href="#cb14-196" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Sex must have exactly 11 missing values&quot;</span></span>
<span id="cb14-197"><a href="#cb14-197" tabindex="-1"></a>  )</span>
<span id="cb14-198"><a href="#cb14-198" tabindex="-1"></a></span>
<span id="cb14-199"><a href="#cb14-199" tabindex="-1"></a>  <span class="co"># Validate complete variables (0 missing)</span></span>
<span id="cb14-200"><a href="#cb14-200" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-201"><a href="#cb14-201" tabindex="-1"></a>    missing_counts[<span class="st">&quot;species&quot;</span>], <span class="dv">0</span>,</span>
<span id="cb14-202"><a href="#cb14-202" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Species must have no missing values&quot;</span></span>
<span id="cb14-203"><a href="#cb14-203" tabindex="-1"></a>  )</span>
<span id="cb14-204"><a href="#cb14-204" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-205"><a href="#cb14-205" tabindex="-1"></a>    missing_counts[<span class="st">&quot;island&quot;</span>], <span class="dv">0</span>,</span>
<span id="cb14-206"><a href="#cb14-206" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Island must have no missing values&quot;</span></span>
<span id="cb14-207"><a href="#cb14-207" tabindex="-1"></a>  )</span>
<span id="cb14-208"><a href="#cb14-208" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-209"><a href="#cb14-209" tabindex="-1"></a>    missing_counts[<span class="st">&quot;year&quot;</span>], <span class="dv">0</span>,</span>
<span id="cb14-210"><a href="#cb14-210" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Year must have no missing values&quot;</span></span>
<span id="cb14-211"><a href="#cb14-211" tabindex="-1"></a>  )</span>
<span id="cb14-212"><a href="#cb14-212" tabindex="-1"></a>})</span>
<span id="cb14-213"><a href="#cb14-213" tabindex="-1"></a></span>
<span id="cb14-214"><a href="#cb14-214" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;penguins raw data sample sizes per group&quot;</span>, {</span>
<span id="cb14-215"><a href="#cb14-215" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(</span>
<span id="cb14-216"><a href="#cb14-216" tabindex="-1"></a>    <span class="st">&quot;data/raw_data/penguins_raw.csv&quot;</span>,</span>
<span id="cb14-217"><a href="#cb14-217" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span></span>
<span id="cb14-218"><a href="#cb14-218" tabindex="-1"></a>  )</span>
<span id="cb14-219"><a href="#cb14-219" tabindex="-1"></a></span>
<span id="cb14-220"><a href="#cb14-220" tabindex="-1"></a>  <span class="co"># Validate species distribution</span></span>
<span id="cb14-221"><a href="#cb14-221" tabindex="-1"></a>  species_counts <span class="ot">&lt;-</span> <span class="fu">table</span>(data<span class="sc">$</span>species)</span>
<span id="cb14-222"><a href="#cb14-222" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-223"><a href="#cb14-223" tabindex="-1"></a>    <span class="fu">as.integer</span>(species_counts[<span class="st">&quot;Adelie&quot;</span>]), <span class="dv">152</span>,</span>
<span id="cb14-224"><a href="#cb14-224" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Adelie must have 152 observations&quot;</span></span>
<span id="cb14-225"><a href="#cb14-225" tabindex="-1"></a>  )</span>
<span id="cb14-226"><a href="#cb14-226" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-227"><a href="#cb14-227" tabindex="-1"></a>    <span class="fu">as.integer</span>(species_counts[<span class="st">&quot;Chinstrap&quot;</span>]), <span class="dv">68</span>,</span>
<span id="cb14-228"><a href="#cb14-228" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Chinstrap must have 68 observations&quot;</span></span>
<span id="cb14-229"><a href="#cb14-229" tabindex="-1"></a>  )</span>
<span id="cb14-230"><a href="#cb14-230" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-231"><a href="#cb14-231" tabindex="-1"></a>    <span class="fu">as.integer</span>(species_counts[<span class="st">&quot;Gentoo&quot;</span>]), <span class="dv">124</span>,</span>
<span id="cb14-232"><a href="#cb14-232" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Gentoo must have 124 observations&quot;</span></span>
<span id="cb14-233"><a href="#cb14-233" tabindex="-1"></a>  )</span>
<span id="cb14-234"><a href="#cb14-234" tabindex="-1"></a></span>
<span id="cb14-235"><a href="#cb14-235" tabindex="-1"></a>  <span class="co"># Validate island distribution</span></span>
<span id="cb14-236"><a href="#cb14-236" tabindex="-1"></a>  island_counts <span class="ot">&lt;-</span> <span class="fu">table</span>(data<span class="sc">$</span>island)</span>
<span id="cb14-237"><a href="#cb14-237" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-238"><a href="#cb14-238" tabindex="-1"></a>    <span class="fu">as.integer</span>(island_counts[<span class="st">&quot;Biscoe&quot;</span>]), <span class="dv">168</span>,</span>
<span id="cb14-239"><a href="#cb14-239" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Biscoe must have 168 observations&quot;</span></span>
<span id="cb14-240"><a href="#cb14-240" tabindex="-1"></a>  )</span>
<span id="cb14-241"><a href="#cb14-241" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-242"><a href="#cb14-242" tabindex="-1"></a>    <span class="fu">as.integer</span>(island_counts[<span class="st">&quot;Dream&quot;</span>]), <span class="dv">124</span>,</span>
<span id="cb14-243"><a href="#cb14-243" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Dream must have 124 observations&quot;</span></span>
<span id="cb14-244"><a href="#cb14-244" tabindex="-1"></a>  )</span>
<span id="cb14-245"><a href="#cb14-245" tabindex="-1"></a>  <span class="fu">expect_equal</span>(</span>
<span id="cb14-246"><a href="#cb14-246" tabindex="-1"></a>    <span class="fu">as.integer</span>(island_counts[<span class="st">&quot;Torgersen&quot;</span>]), <span class="dv">52</span>,</span>
<span id="cb14-247"><a href="#cb14-247" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;Torgersen must have 52 observations&quot;</span></span>
<span id="cb14-248"><a href="#cb14-248" tabindex="-1"></a>  )</span>
<span id="cb14-249"><a href="#cb14-249" tabindex="-1"></a>})</span>
<span id="cb14-250"><a href="#cb14-250" tabindex="-1"></a></span>
<span id="cb14-251"><a href="#cb14-251" tabindex="-1"></a><span class="fu">test_that</span>(<span class="st">&quot;penguins raw data file integrity verification&quot;</span>, {</span>
<span id="cb14-252"><a href="#cb14-252" tabindex="-1"></a>  data_file <span class="ot">&lt;-</span> <span class="st">&quot;data/raw_data/penguins_raw.csv&quot;</span></span>
<span id="cb14-253"><a href="#cb14-253" tabindex="-1"></a></span>
<span id="cb14-254"><a href="#cb14-254" tabindex="-1"></a>  <span class="co"># Calculate MD5 checksum for file integrity</span></span>
<span id="cb14-255"><a href="#cb14-255" tabindex="-1"></a>  file_md5 <span class="ot">&lt;-</span> tools<span class="sc">::</span><span class="fu">md5sum</span>(data_file)</span>
<span id="cb14-256"><a href="#cb14-256" tabindex="-1"></a></span>
<span id="cb14-257"><a href="#cb14-257" tabindex="-1"></a>  <span class="co"># Verify checksum format (32 hexadecimal characters)</span></span>
<span id="cb14-258"><a href="#cb14-258" tabindex="-1"></a>  <span class="fu">expect_true</span>(</span>
<span id="cb14-259"><a href="#cb14-259" tabindex="-1"></a>    <span class="fu">nchar</span>(file_md5) <span class="sc">==</span> <span class="dv">32</span>,</span>
<span id="cb14-260"><a href="#cb14-260" tabindex="-1"></a>    <span class="at">info =</span> <span class="st">&quot;MD5 checksum must be 32 characters&quot;</span></span>
<span id="cb14-261"><a href="#cb14-261" tabindex="-1"></a>  )</span>
<span id="cb14-262"><a href="#cb14-262" tabindex="-1"></a></span>
<span id="cb14-263"><a href="#cb14-263" tabindex="-1"></a>  <span class="co"># Document checksum for future validation</span></span>
<span id="cb14-264"><a href="#cb14-264" tabindex="-1"></a>  <span class="co"># In production: expect_equal(file_md5, &quot;known_hash_value&quot;)</span></span>
<span id="cb14-265"><a href="#cb14-265" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Current MD5 checksum: &quot;</span>, file_md5)</span>
<span id="cb14-266"><a href="#cb14-266" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Record this value for ongoing integrity checks&quot;</span>)</span>
<span id="cb14-267"><a href="#cb14-267" tabindex="-1"></a>})</span></code></pre></div>
</div>
<div id="test-execution" class="section level2">
<h2>Test Execution</h2>
<p>Execute validation tests from the host environment:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Navigate to project directory</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="bu">cd</span> ~/projects/penguin-analysis</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co"># Run validation test suite</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">&quot;library(testthat); </span><span class="dt">\</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="st">  test_file(&#39;tests/testthat/test-raw-data-validation.R&#39;)&quot;</span></span></code></pre></div>
</div>
</div>
<div id="container-environment-usage" class="section level1">
<h1>Container Environment Usage</h1>
<p>The Docker container provides an isolated, reproducible computational
environment with all specified dependencies pre-installed.</p>
<div id="container-initialization" class="section level2">
<h2>Container Initialization</h2>
<p>Navigate to the project directory and enter the container:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># Navigate to project location</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="bu">cd</span> ~/projects/penguin-analysis</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co"># Enter container with Zsh shell</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="fu">make</span> docker-zsh</span></code></pre></div>
<p>This command performs the following operations:</p>
<ol style="list-style-type: decimal">
<li>Builds or starts the Docker container with Standard Mode
packages</li>
<li>Loads personal dotfiles (if specified during initialization)</li>
<li>Provides Zsh shell within the container environment</li>
<li>Mounts project directory at /home/analyst/project</li>
</ol>
</div>
<div id="alternative-entry-methods" class="section level2">
<h2>Alternative Entry Methods</h2>
<p>Multiple interfaces are available for container interaction:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># Zsh shell with dotfiles (recommended for development)</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="fu">make</span> docker-zsh</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="co"># RStudio Server web interface</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="fu">make</span> docker-rstudio</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="co"># Access via web browser: http://localhost:8787</span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="co"># Credentials: username=rstudio, password=rstudio</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="co"># R console only</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="fu">make</span> docker-r</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="co"># Bash shell</span></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a><span class="fu">make</span> docker-bash</span></code></pre></div>
</div>
<div id="environment-verification" class="section level2">
<h2>Environment Verification</h2>
<p>Confirm proper container configuration:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># Verify R installation</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">--version</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co"># Verify package availability (Standard Mode)</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">&quot;library(palmerpenguins); library(tidyverse); sessionInfo()&quot;</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="co"># Verify dotfiles configuration (if specified)</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="bu">alias</span>                <span class="co"># Display custom aliases</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$PATH</span>           <span class="co"># Display PATH configuration</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="co"># Verify project file accessibility</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-la</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="co"># Expected: R/, data/, tests/, vignettes/, etc.</span></span></code></pre></div>
</div>
</div>
<div id="data-preparation-workflow" class="section level1">
<h1>Data Preparation Workflow</h1>
<p>Analysis-ready datasets are created through documented
transformations of raw data files.</p>
<div id="preparation-function-development" class="section level2">
<h2>Preparation Function Development</h2>
<p>Create a data preparation function with comprehensive
documentation:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># Within container environment</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>cat <span class="sc">&gt;</span> R<span class="sc">/</span>prepare_penguin_data.R <span class="sc">&lt;</span><span class="er">&lt;</span> <span class="st">&#39;EOF&#39;</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="co">#&#39; Prepare Palmer Penguins Data for Analysis</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="co">#&#39; This function processes raw penguin morphometric data to create</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="co">#&#39; analysis-ready datasets through systematic transformations.</span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="co">#&#39; Processing steps include:</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="co">#&#39; \itemize{</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="co">#&#39;   \item Removal of observations with missing values</span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="co">#&#39;   \item Addition of derived variables (ratios, transformations)</span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="co">#&#39;   \item Proper ordering of factor levels for visualization</span></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="co">#&#39; }</span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="co">#&#39;</span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="co">#&#39; @param data_file Character string specifying path to raw data CSV</span></span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="co">#&#39; @param n_records Integer specifying number of records to return</span></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="co">#&#39;   (NULL returns all complete cases)</span></span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a><span class="co">#&#39; @return data.frame containing cleaned, analysis-ready data with</span></span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a><span class="co">#&#39;   metadata attributes</span></span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a><span class="co">#&#39; @export</span></span>
<span id="cb19-21"><a href="#cb19-21" tabindex="-1"></a><span class="co">#&#39; @examples</span></span>
<span id="cb19-22"><a href="#cb19-22" tabindex="-1"></a><span class="co">#&#39; penguins_clean &lt;- prepare_penguin_data()</span></span>
<span id="cb19-23"><a href="#cb19-23" tabindex="-1"></a><span class="co">#&#39; summary(penguins_clean)</span></span>
<span id="cb19-24"><a href="#cb19-24" tabindex="-1"></a>prepare_penguin_data <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb19-25"><a href="#cb19-25" tabindex="-1"></a>    <span class="at">data_file =</span> <span class="st">&quot;data/raw_data/penguins_raw.csv&quot;</span>,</span>
<span id="cb19-26"><a href="#cb19-26" tabindex="-1"></a>    <span class="at">n_records =</span> <span class="cn">NULL</span>) {</span>
<span id="cb19-27"><a href="#cb19-27" tabindex="-1"></a></span>
<span id="cb19-28"><a href="#cb19-28" tabindex="-1"></a>  <span class="co"># Input validation</span></span>
<span id="cb19-29"><a href="#cb19-29" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(data_file)) {</span>
<span id="cb19-30"><a href="#cb19-30" tabindex="-1"></a>    <span class="fu">stop</span>(<span class="st">&quot;Data file not found: &quot;</span>, data_file)</span>
<span id="cb19-31"><a href="#cb19-31" tabindex="-1"></a>  }</span>
<span id="cb19-32"><a href="#cb19-32" tabindex="-1"></a></span>
<span id="cb19-33"><a href="#cb19-33" tabindex="-1"></a>  <span class="co"># Load raw data with factor conversion</span></span>
<span id="cb19-34"><a href="#cb19-34" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(data_file, <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-35"><a href="#cb19-35" tabindex="-1"></a></span>
<span id="cb19-36"><a href="#cb19-36" tabindex="-1"></a>  <span class="co"># Remove incomplete cases</span></span>
<span id="cb19-37"><a href="#cb19-37" tabindex="-1"></a>  clean_data <span class="ot">&lt;-</span> data[<span class="fu">complete.cases</span>(data), ]</span>
<span id="cb19-38"><a href="#cb19-38" tabindex="-1"></a></span>
<span id="cb19-39"><a href="#cb19-39" tabindex="-1"></a>  <span class="co"># Generate derived variables for analysis</span></span>
<span id="cb19-40"><a href="#cb19-40" tabindex="-1"></a>  clean_data<span class="sc">$</span>bill_ratio <span class="ot">&lt;-</span></span>
<span id="cb19-41"><a href="#cb19-41" tabindex="-1"></a>    clean_data<span class="sc">$</span>bill_length_mm <span class="sc">/</span> clean_data<span class="sc">$</span>bill_depth_mm</span>
<span id="cb19-42"><a href="#cb19-42" tabindex="-1"></a>  clean_data<span class="sc">$</span>log_body_mass_g <span class="ot">&lt;-</span> <span class="fu">log</span>(clean_data<span class="sc">$</span>body_mass_g)</span>
<span id="cb19-43"><a href="#cb19-43" tabindex="-1"></a>  clean_data<span class="sc">$</span>body_mass_kg <span class="ot">&lt;-</span> clean_data<span class="sc">$</span>body_mass_g <span class="sc">/</span> <span class="dv">1000</span></span>
<span id="cb19-44"><a href="#cb19-44" tabindex="-1"></a></span>
<span id="cb19-45"><a href="#cb19-45" tabindex="-1"></a>  <span class="co"># Order species factor by body mass for visualization</span></span>
<span id="cb19-46"><a href="#cb19-46" tabindex="-1"></a>  species_order <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Adelie&quot;</span>, <span class="st">&quot;Chinstrap&quot;</span>, <span class="st">&quot;Gentoo&quot;</span>)</span>
<span id="cb19-47"><a href="#cb19-47" tabindex="-1"></a>  clean_data<span class="sc">$</span>species <span class="ot">&lt;-</span></span>
<span id="cb19-48"><a href="#cb19-48" tabindex="-1"></a>    <span class="fu">factor</span>(clean_data<span class="sc">$</span>species, <span class="at">levels =</span> species_order)</span>
<span id="cb19-49"><a href="#cb19-49" tabindex="-1"></a></span>
<span id="cb19-50"><a href="#cb19-50" tabindex="-1"></a>  <span class="co"># Subset to specified record count if requested</span></span>
<span id="cb19-51"><a href="#cb19-51" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">is.null</span>(n_records)) {</span>
<span id="cb19-52"><a href="#cb19-52" tabindex="-1"></a>    <span class="cf">if</span> (n_records <span class="sc">&gt;</span> <span class="fu">nrow</span>(clean_data)) {</span>
<span id="cb19-53"><a href="#cb19-53" tabindex="-1"></a>      <span class="fu">warning</span>(</span>
<span id="cb19-54"><a href="#cb19-54" tabindex="-1"></a>        <span class="st">&quot;Requested &quot;</span>, n_records, <span class="st">&quot; records but only &quot;</span>,</span>
<span id="cb19-55"><a href="#cb19-55" tabindex="-1"></a>        <span class="fu">nrow</span>(clean_data), <span class="st">&quot; available&quot;</span></span>
<span id="cb19-56"><a href="#cb19-56" tabindex="-1"></a>      )</span>
<span id="cb19-57"><a href="#cb19-57" tabindex="-1"></a>    }</span>
<span id="cb19-58"><a href="#cb19-58" tabindex="-1"></a>    clean_data <span class="ot">&lt;-</span></span>
<span id="cb19-59"><a href="#cb19-59" tabindex="-1"></a>      clean_data[<span class="dv">1</span><span class="sc">:</span><span class="fu">min</span>(n_records, <span class="fu">nrow</span>(clean_data)), ]</span>
<span id="cb19-60"><a href="#cb19-60" tabindex="-1"></a>  }</span>
<span id="cb19-61"><a href="#cb19-61" tabindex="-1"></a></span>
<span id="cb19-62"><a href="#cb19-62" tabindex="-1"></a>  <span class="co"># Attach metadata attributes</span></span>
<span id="cb19-63"><a href="#cb19-63" tabindex="-1"></a>  <span class="fu">attr</span>(clean_data, <span class="st">&quot;preparation_date&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb19-64"><a href="#cb19-64" tabindex="-1"></a>  <span class="fu">attr</span>(clean_data, <span class="st">&quot;source_file&quot;</span>) <span class="ot">&lt;-</span> data_file</span>
<span id="cb19-65"><a href="#cb19-65" tabindex="-1"></a>  <span class="fu">attr</span>(clean_data, <span class="st">&quot;n_removed&quot;</span>) <span class="ot">&lt;-</span> <span class="fu">nrow</span>(data) <span class="sc">-</span> <span class="fu">nrow</span>(clean_data)</span>
<span id="cb19-66"><a href="#cb19-66" tabindex="-1"></a></span>
<span id="cb19-67"><a href="#cb19-67" tabindex="-1"></a>  <span class="fu">return</span>(clean_data)</span>
<span id="cb19-68"><a href="#cb19-68" tabindex="-1"></a>}</span>
<span id="cb19-69"><a href="#cb19-69" tabindex="-1"></a>EOF</span></code></pre></div>
</div>
<div id="preparation-execution" class="section level2">
<h2>Preparation Execution</h2>
<p>Execute the data preparation workflow within the container:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># Start R session within container</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>R</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co"># Load project functions</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">load_all</span>()</span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="co"># Execute preparation function</span></span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>penguins_clean <span class="ot">&lt;-</span> <span class="fu">prepare_penguin_data</span>()</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a><span class="co"># Verify transformations</span></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="fu">summary</span>(penguins_clean)</span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a><span class="fu">str</span>(penguins_clean)</span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a><span class="co"># Inspect derived variables</span></span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a><span class="fu">head</span>(</span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a>  penguins_clean[, <span class="fu">c</span>(<span class="st">&quot;species&quot;</span>, <span class="st">&quot;body_mass_g&quot;</span>,</span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a>                     <span class="st">&quot;log_body_mass_g&quot;</span>, <span class="st">&quot;body_mass_kg&quot;</span>,</span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a>                     <span class="st">&quot;bill_ratio&quot;</span>)]</span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a>)</span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a><span class="co"># Verify record removal count</span></span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a><span class="fu">attr</span>(penguins_clean, <span class="st">&quot;n_removed&quot;</span>)  <span class="co"># Expected: 11 records</span></span>
<span id="cb20-23"><a href="#cb20-23" tabindex="-1"></a></span>
<span id="cb20-24"><a href="#cb20-24" tabindex="-1"></a><span class="co"># Write to derived data directory</span></span>
<span id="cb20-25"><a href="#cb20-25" tabindex="-1"></a><span class="fu">saveRDS</span>(penguins_clean, <span class="st">&quot;data/derived_data/penguins_clean.rds&quot;</span>)</span>
<span id="cb20-26"><a href="#cb20-26" tabindex="-1"></a><span class="fu">write.csv</span>(</span>
<span id="cb20-27"><a href="#cb20-27" tabindex="-1"></a>  penguins_clean,</span>
<span id="cb20-28"><a href="#cb20-28" tabindex="-1"></a>  <span class="st">&quot;data/derived_data/penguins_clean.csv&quot;</span>,</span>
<span id="cb20-29"><a href="#cb20-29" tabindex="-1"></a>  <span class="at">row.names =</span> <span class="cn">FALSE</span></span>
<span id="cb20-30"><a href="#cb20-30" tabindex="-1"></a>)</span>
<span id="cb20-31"><a href="#cb20-31" tabindex="-1"></a></span>
<span id="cb20-32"><a href="#cb20-32" tabindex="-1"></a><span class="co"># Exit R session</span></span>
<span id="cb20-33"><a href="#cb20-33" tabindex="-1"></a><span class="fu">quit</span>(<span class="at">save =</span> <span class="st">&quot;no&quot;</span>)</span></code></pre></div>
</div>
<div id="derived-data-documentation" class="section level2">
<h2>Derived Data Documentation</h2>
<p>Document the transformation process for reproducibility:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co"># Within container environment</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;&gt;</span> data/README.md <span class="op">&lt;&lt; &#39;EOF&#39;</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="st">## Derived Data Files</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a><span class="st">### penguins_clean.rds / penguins_clean.csv</span></span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a><span class="st">**Description**: Analysis-ready Palmer Penguins dataset with</span></span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a><span class="st">complete cases and derived analytical variables.</span></span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a><span class="st">**Source Script**: R/prepare_penguin_data.R</span></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a><span class="st">**Source Data**: data/raw_data/penguins_raw.csv</span></span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a><span class="st">**Creation Date**: 2025-10-02</span></span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a><span class="st">**Transformations Applied**:</span></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a><span class="st">1. Removed 11 observations with missing values (3.2% of dataset)</span></span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a><span class="st">2. Calculated bill_ratio = bill_length_mm / bill_depth_mm</span></span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a><span class="st">3. Calculated log_body_mass_g = log(body_mass_g) for log-linear</span></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a><span class="st">   models</span></span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a><span class="st">4. Calculated body_mass_kg = body_mass_g / 1000 for improved</span></span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a><span class="st">   interpretability</span></span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a><span class="st">5. Ordered species factor by body mass</span></span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a><span class="st">   (Adelie &lt; Chinstrap &lt; Gentoo)</span></span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a></span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a><span class="st">**Final Sample Size**: 333 complete observations</span></span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a></span>
<span id="cb21-28"><a href="#cb21-28" tabindex="-1"></a><span class="st">**Quality Assurance**:</span></span>
<span id="cb21-29"><a href="#cb21-29" tabindex="-1"></a></span>
<span id="cb21-30"><a href="#cb21-30" tabindex="-1"></a><span class="st">- No missing values in any variable</span></span>
<span id="cb21-31"><a href="#cb21-31" tabindex="-1"></a><span class="st">- All derived variables within expected ranges</span></span>
<span id="cb21-32"><a href="#cb21-32" tabindex="-1"></a><span class="st">- Species distribution maintained: Adelie=146, Chinstrap=68,</span></span>
<span id="cb21-33"><a href="#cb21-33" tabindex="-1"></a><span class="st">  Gentoo=119</span></span>
<span id="cb21-34"><a href="#cb21-34" tabindex="-1"></a></span>
<span id="cb21-35"><a href="#cb21-35" tabindex="-1"></a><span class="st">**Usage Example**:</span></span>
<span id="cb21-36"><a href="#cb21-36" tabindex="-1"></a></span>
<span id="cb21-37"><a href="#cb21-37" tabindex="-1"></a><span class="st">```r</span></span>
<span id="cb21-38"><a href="#cb21-38" tabindex="-1"></a><span class="st"># Load prepared data in R</span></span>
<span id="cb21-39"><a href="#cb21-39" tabindex="-1"></a><span class="st">penguins_clean &lt;- readRDS(&quot;data/derived_data/penguins_clean.rds&quot;)</span></span></code></pre></div>
<p>EOF</p>
<pre><code>
# Function Testing

Comprehensive unit tests ensure data preparation functions behave as
specified across various input conditions.

## Test Suite Development

Create tests for the preparation function:

```bash
# Within container environment
cat &gt; tests/testthat/test-prepare-penguin-data.R &lt;&lt; &#39;EOF&#39;
library(testthat)

test_that(&quot;prepare_penguin_data() loads and cleans correctly&quot;, {
  # Execute preparation function
  penguins &lt;- prepare_penguin_data()

  # Verify return type
  expect_s3_class(penguins, &quot;data.frame&quot;)

  # Verify completeness
  expect_false(
    any(is.na(penguins)),
    info = &quot;Cleaned data must contain no missing values&quot;
  )

  # Verify sample size (344 original - 11 incomplete = 333)
  expect_equal(
    nrow(penguins), 333,
    info = &quot;Must contain 333 complete observations&quot;
  )

  # Verify derived variables present
  expect_true(
    all(c(&quot;bill_ratio&quot;, &quot;log_body_mass_g&quot;, &quot;body_mass_kg&quot;)
        %in% names(penguins)),
    info = &quot;Derived variables must be present&quot;
  )
})

test_that(&quot;prepare_penguin_data() creates valid derivations&quot;, {
  penguins &lt;- prepare_penguin_data()

  # Verify bill ratio validity
  expect_true(
    all(penguins$bill_ratio &gt; 0),
    info = &quot;Bill ratio must be positive&quot;
  )

  # Verify bill ratio calculation
  expected_ratio &lt;-
    penguins$bill_length_mm / penguins$bill_depth_mm
  expect_equal(
    penguins$bill_ratio, expected_ratio,
    info = &quot;Bill ratio calculation must be accurate&quot;
  )

  # Verify log body mass calculation
  expected_log &lt;- log(penguins$body_mass_g)
  expect_equal(
    penguins$log_body_mass_g, expected_log,
    info = &quot;Log body mass calculation must be accurate&quot;
  )

  # Verify body mass conversion
  expected_kg &lt;- penguins$body_mass_g / 1000
  expect_equal(
    penguins$body_mass_kg, expected_kg,
    info = &quot;Body mass conversion must be accurate&quot;
  )
})

test_that(&quot;prepare_penguin_data() handles n_records parameter&quot;, {
  # Request subset of 50 records
  penguins_50 &lt;- prepare_penguin_data(n_records = 50)

  expect_equal(
    nrow(penguins_50), 50,
    info = &quot;Must return exactly 50 records when requested&quot;
  )

  # Request excessive records (should warn)
  expect_warning({
    penguins_many &lt;- prepare_penguin_data(n_records = 500)
  }, regexp = &quot;only.*available&quot;)

  expect_equal(
    nrow(penguins_many), 333,
    info = &quot;Must return all available records when request exceeds&quot;
  )
})

test_that(&quot;prepare_penguin_data() adds metadata attributes&quot;, {
  penguins &lt;- prepare_penguin_data()

  # Verify metadata presence
  expect_true(
    !is.null(attr(penguins, &quot;preparation_date&quot;)),
    info = &quot;Must contain preparation_date attribute&quot;
  )
  expect_true(
    !is.null(attr(penguins, &quot;source_file&quot;)),
    info = &quot;Must contain source_file attribute&quot;
  )
  expect_true(
    !is.null(attr(penguins, &quot;n_removed&quot;)),
    info = &quot;Must contain n_removed attribute&quot;
  )

  # Verify n_removed value
  expect_equal(
    attr(penguins, &quot;n_removed&quot;), 11,
    info = &quot;Must have removed exactly 11 incomplete cases&quot;
  )
})

test_that(&quot;prepare_penguin_data() maintains distribution&quot;, {
  penguins &lt;- prepare_penguin_data()

  # Quantify species distribution
  species_counts &lt;- table(penguins$species)

  # Verify all species present
  expect_equal(
    length(species_counts), 3,
    info = &quot;Must contain all three species&quot;
  )

  # Verify adequate sample sizes after missing data removal
  expect_true(
    species_counts[&quot;Adelie&quot;] &gt; 140,
    info = &quot;Must retain substantial Adelie sample&quot;
  )
  expect_true(
    species_counts[&quot;Gentoo&quot;] &gt; 110,
    info = &quot;Must retain substantial Gentoo sample&quot;
  )
  expect_true(
    species_counts[&quot;Chinstrap&quot;] &gt; 60,
    info = &quot;Must retain substantial Chinstrap sample&quot;
  )
})

test_that(&quot;prepare_penguin_data() errors on invalid file&quot;, {
  expect_error({
    prepare_penguin_data(data_file = &quot;nonexistent.csv&quot;)
  }, regexp = &quot;Data file not found&quot;)
})
EOF</code></pre>
</div>
<div id="test-execution-1" class="section level2">
<h2>Test Execution</h2>
<p>Run the complete test suite:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># Within container environment</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="ex">R</span> <span class="at">-e</span> <span class="st">&quot;devtools::test()&quot;</span></span></code></pre></div>
</div>
</div>
<div id="container-exit-procedures" class="section level1">
<h1>Container Exit Procedures</h1>
<p>Upon completion of development work, exit the container to return to
the host environment.</p>
<div id="exit-methods" class="section level2">
<h2>Exit Methods</h2>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co"># Exit container (returns to host)</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="bu">exit</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="co"># Alternative: Ctrl+D keyboard shortcut</span></span></code></pre></div>
</div>
<div id="data-persistence" class="section level2">
<h2>Data Persistence</h2>
<p>Container exit behavior:</p>
<ol style="list-style-type: decimal">
<li>Container process terminates</li>
<li>All files persist on host filesystem (mounted volumes)</li>
<li>Git commits remain accessible on host</li>
<li>Container can be restarted with make docker-zsh</li>
</ol>
</div>
<div id="verification-of-persistence" class="section level2">
<h2>Verification of Persistence</h2>
<p>Confirm work persists after container exit:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># Verify derived data persistence</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="fu">ls</span> <span class="at">-lh</span> data/derived_data/</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="co"># Expected: penguins_clean.rds, penguins_clean.csv</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="co"># Verify function code persistence</span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="fu">cat</span> R/prepare_penguin_data.R</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="co"># Verify test persistence</span></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a><span class="fu">ls</span> tests/testthat/</span></code></pre></div>
</div>
</div>
<div id="complete-analysis-example" class="section level1">
<h1>Complete Analysis Example</h1>
<p>A comprehensive analysis demonstrates the complete workflow from data
preparation through statistical modeling and visualization.</p>
<div id="analysis-script-development" class="section level2">
<h2>Analysis Script Development</h2>
<p>Create a complete analysis script on the host:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># Execute from host environment</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="fu">cat</span> <span class="op">&gt;</span> scripts/01_penguin_bill_analysis.R <span class="op">&lt;&lt; &#39;EOF&#39;</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="st">#=======================================================================</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="st"># Palmer Penguins Bill Dimension Analysis</span></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="st">#=======================================================================</span></span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a><span class="st"># Purpose: Examine relationship between bill dimensions and body mass</span></span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a><span class="st">#          across penguin species</span></span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a><span class="st"># Author: Research Team</span></span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a><span class="st"># Date: 2025-10-02</span></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a><span class="st">library(tidyverse)</span></span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a><span class="st">library(palmerpenguins)</span></span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a><span class="st">library(broom)</span></span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" tabindex="-1"></a><span class="st"># Load prepared dataset</span></span>
<span id="cb26-16"><a href="#cb26-16" tabindex="-1"></a><span class="st">penguins_clean &lt;- readRDS(&quot;data/derived_data/penguins_clean.rds&quot;)</span></span>
<span id="cb26-17"><a href="#cb26-17" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" tabindex="-1"></a><span class="st">#=======================================================================</span></span>
<span id="cb26-19"><a href="#cb26-19" tabindex="-1"></a><span class="st"># Exploratory Analysis</span></span>
<span id="cb26-20"><a href="#cb26-20" tabindex="-1"></a><span class="st">#=======================================================================</span></span>
<span id="cb26-21"><a href="#cb26-21" tabindex="-1"></a></span>
<span id="cb26-22"><a href="#cb26-22" tabindex="-1"></a><span class="st"># Calculate summary statistics by species</span></span>
<span id="cb26-23"><a href="#cb26-23" tabindex="-1"></a><span class="st">summary_stats &lt;- penguins_clean %&gt;%</span></span>
<span id="cb26-24"><a href="#cb26-24" tabindex="-1"></a><span class="st">  group_by(species) %&gt;%</span></span>
<span id="cb26-25"><a href="#cb26-25" tabindex="-1"></a><span class="st">  summarise(</span></span>
<span id="cb26-26"><a href="#cb26-26" tabindex="-1"></a><span class="st">    n = n(),</span></span>
<span id="cb26-27"><a href="#cb26-27" tabindex="-1"></a><span class="st">    mean_bill_length = mean(bill_length_mm),</span></span>
<span id="cb26-28"><a href="#cb26-28" tabindex="-1"></a><span class="st">    sd_bill_length = sd(bill_length_mm),</span></span>
<span id="cb26-29"><a href="#cb26-29" tabindex="-1"></a><span class="st">    mean_body_mass = mean(body_mass_g),</span></span>
<span id="cb26-30"><a href="#cb26-30" tabindex="-1"></a><span class="st">    sd_body_mass = sd(body_mass_g),</span></span>
<span id="cb26-31"><a href="#cb26-31" tabindex="-1"></a><span class="st">    .groups = &quot;drop&quot;</span></span>
<span id="cb26-32"><a href="#cb26-32" tabindex="-1"></a><span class="st">  )</span></span>
<span id="cb26-33"><a href="#cb26-33" tabindex="-1"></a></span>
<span id="cb26-34"><a href="#cb26-34" tabindex="-1"></a><span class="st">print(&quot;Summary Statistics by Species:&quot;)</span></span>
<span id="cb26-35"><a href="#cb26-35" tabindex="-1"></a><span class="st">print(summary_stats)</span></span>
<span id="cb26-36"><a href="#cb26-36" tabindex="-1"></a></span>
<span id="cb26-37"><a href="#cb26-37" tabindex="-1"></a><span class="st">#=======================================================================</span></span>
<span id="cb26-38"><a href="#cb26-38" tabindex="-1"></a><span class="st"># Statistical Modeling</span></span>
<span id="cb26-39"><a href="#cb26-39" tabindex="-1"></a><span class="st">#=======================================================================</span></span>
<span id="cb26-40"><a href="#cb26-40" tabindex="-1"></a></span>
<span id="cb26-41"><a href="#cb26-41" tabindex="-1"></a><span class="st"># Fit linear model with interaction terms</span></span>
<span id="cb26-42"><a href="#cb26-42" tabindex="-1"></a><span class="st">model &lt;- lm(</span></span>
<span id="cb26-43"><a href="#cb26-43" tabindex="-1"></a><span class="st">  body_mass_g ~ bill_length_mm * species +</span></span>
<span id="cb26-44"><a href="#cb26-44" tabindex="-1"></a><span class="st">                bill_depth_mm * species,</span></span>
<span id="cb26-45"><a href="#cb26-45" tabindex="-1"></a><span class="st">  data = penguins_clean</span></span>
<span id="cb26-46"><a href="#cb26-46" tabindex="-1"></a><span class="st">)</span></span>
<span id="cb26-47"><a href="#cb26-47" tabindex="-1"></a></span>
<span id="cb26-48"><a href="#cb26-48" tabindex="-1"></a><span class="st"># Extract model coefficients and fit statistics</span></span>
<span id="cb26-49"><a href="#cb26-49" tabindex="-1"></a><span class="st">model_summary &lt;- tidy(model)</span></span>
<span id="cb26-50"><a href="#cb26-50" tabindex="-1"></a><span class="st">model_fit &lt;- glance(model)</span></span>
<span id="cb26-51"><a href="#cb26-51" tabindex="-1"></a></span>
<span id="cb26-52"><a href="#cb26-52" tabindex="-1"></a><span class="st">print(&quot;\nModel Coefficients:&quot;)</span></span>
<span id="cb26-53"><a href="#cb26-53" tabindex="-1"></a><span class="st">print(model_summary)</span></span>
<span id="cb26-54"><a href="#cb26-54" tabindex="-1"></a><span class="st">print(paste(&quot;R-squared:&quot;, round(model_fit$r.squared, 3)))</span></span>
<span id="cb26-55"><a href="#cb26-55" tabindex="-1"></a></span>
<span id="cb26-56"><a href="#cb26-56" tabindex="-1"></a><span class="st">#=======================================================================</span></span>
<span id="cb26-57"><a href="#cb26-57" tabindex="-1"></a><span class="st"># Visualization</span></span>
<span id="cb26-58"><a href="#cb26-58" tabindex="-1"></a><span class="st">#=======================================================================</span></span>
<span id="cb26-59"><a href="#cb26-59" tabindex="-1"></a></span>
<span id="cb26-60"><a href="#cb26-60" tabindex="-1"></a><span class="st"># Create scatter plot with species-specific regression lines</span></span>
<span id="cb26-61"><a href="#cb26-61" tabindex="-1"></a><span class="st">p1 &lt;- ggplot(</span></span>
<span id="cb26-62"><a href="#cb26-62" tabindex="-1"></a><span class="st">  penguins_clean,</span></span>
<span id="cb26-63"><a href="#cb26-63" tabindex="-1"></a><span class="st">  aes(x = bill_length_mm, y = body_mass_g, color = species)</span></span>
<span id="cb26-64"><a href="#cb26-64" tabindex="-1"></a><span class="st">) +</span></span>
<span id="cb26-65"><a href="#cb26-65" tabindex="-1"></a><span class="st">  geom_point(size = 2, alpha = 0.7) +</span></span>
<span id="cb26-66"><a href="#cb26-66" tabindex="-1"></a><span class="st">  geom_smooth(method = &quot;lm&quot;, se = TRUE) +</span></span>
<span id="cb26-67"><a href="#cb26-67" tabindex="-1"></a><span class="st">  labs(</span></span>
<span id="cb26-68"><a href="#cb26-68" tabindex="-1"></a><span class="st">    title = &quot;Penguin Body Mass vs Bill Length&quot;,</span></span>
<span id="cb26-69"><a href="#cb26-69" tabindex="-1"></a><span class="st">    subtitle = &quot;Palmer Archipelago Penguins (2007-2009)&quot;,</span></span>
<span id="cb26-70"><a href="#cb26-70" tabindex="-1"></a><span class="st">    x = &quot;Bill Length (mm)&quot;,</span></span>
<span id="cb26-71"><a href="#cb26-71" tabindex="-1"></a><span class="st">    y = &quot;Body Mass (g)&quot;,</span></span>
<span id="cb26-72"><a href="#cb26-72" tabindex="-1"></a><span class="st">    color = &quot;Species&quot;</span></span>
<span id="cb26-73"><a href="#cb26-73" tabindex="-1"></a><span class="st">  ) +</span></span>
<span id="cb26-74"><a href="#cb26-74" tabindex="-1"></a><span class="st">  theme_minimal() +</span></span>
<span id="cb26-75"><a href="#cb26-75" tabindex="-1"></a><span class="st">  theme(legend.position = &quot;bottom&quot;)</span></span>
<span id="cb26-76"><a href="#cb26-76" tabindex="-1"></a></span>
<span id="cb26-77"><a href="#cb26-77" tabindex="-1"></a><span class="st"># Write figure to file</span></span>
<span id="cb26-78"><a href="#cb26-78" tabindex="-1"></a><span class="st">ggsave(</span></span>
<span id="cb26-79"><a href="#cb26-79" tabindex="-1"></a><span class="st">  &quot;analysis/figures/bill_length_vs_mass.png&quot;, p1,</span></span>
<span id="cb26-80"><a href="#cb26-80" tabindex="-1"></a><span class="st">  width = 10, height = 6, dpi = 300</span></span>
<span id="cb26-81"><a href="#cb26-81" tabindex="-1"></a><span class="st">)</span></span>
<span id="cb26-82"><a href="#cb26-82" tabindex="-1"></a></span>
<span id="cb26-83"><a href="#cb26-83" tabindex="-1"></a><span class="st">print(&quot;\nAnalysis complete.&quot;)</span></span>
<span id="cb26-84"><a href="#cb26-84" tabindex="-1"></a><span class="st">print(&quot;Figure: analysis/figures/bill_length_vs_mass.png&quot;)</span></span>
<span id="cb26-85"><a href="#cb26-85" tabindex="-1"></a></span>
<span id="cb26-86"><a href="#cb26-86" tabindex="-1"></a><span class="st">#=======================================================================</span></span>
<span id="cb26-87"><a href="#cb26-87" tabindex="-1"></a><span class="st"># Save Results</span></span>
<span id="cb26-88"><a href="#cb26-88" tabindex="-1"></a><span class="st">#=======================================================================</span></span>
<span id="cb26-89"><a href="#cb26-89" tabindex="-1"></a></span>
<span id="cb26-90"><a href="#cb26-90" tabindex="-1"></a><span class="st"># Compile results object</span></span>
<span id="cb26-91"><a href="#cb26-91" tabindex="-1"></a><span class="st">results &lt;- list(</span></span>
<span id="cb26-92"><a href="#cb26-92" tabindex="-1"></a><span class="st">  summary_stats = summary_stats,</span></span>
<span id="cb26-93"><a href="#cb26-93" tabindex="-1"></a><span class="st">  model = model,</span></span>
<span id="cb26-94"><a href="#cb26-94" tabindex="-1"></a><span class="st">  model_summary = model_summary,</span></span>
<span id="cb26-95"><a href="#cb26-95" tabindex="-1"></a><span class="st">  model_fit = model_fit,</span></span>
<span id="cb26-96"><a href="#cb26-96" tabindex="-1"></a><span class="st">  plot = p1</span></span>
<span id="cb26-97"><a href="#cb26-97" tabindex="-1"></a><span class="st">)</span></span>
<span id="cb26-98"><a href="#cb26-98" tabindex="-1"></a></span>
<span id="cb26-99"><a href="#cb26-99" tabindex="-1"></a><span class="st"># Write results to file</span></span>
<span id="cb26-100"><a href="#cb26-100" tabindex="-1"></a><span class="st">saveRDS(results, &quot;data/derived_data/bill_analysis_results.rds&quot;)</span></span>
<span id="cb26-101"><a href="#cb26-101" tabindex="-1"></a><span class="st">print(&quot;Results: data/derived_data/bill_analysis_results.rds&quot;)</span></span>
<span id="cb26-102"><a href="#cb26-102" tabindex="-1"></a><span class="op">EOF</span></span></code></pre></div>
</div>
<div id="analysis-execution" class="section level2">
<h2>Analysis Execution</h2>
<p>Run the analysis within the container environment:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="co"># Enter container</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="fu">make</span> docker-zsh</span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="co"># Execute analysis script</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a><span class="ex">Rscript</span> scripts/01_penguin_bill_analysis.R</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a><span class="co"># Exit container</span></span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a><span class="bu">exit</span></span></code></pre></div>
</div>
<div id="results-examination" class="section level2">
<h2>Results Examination</h2>
<p>View results from the host environment:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="co"># View generated figure (macOS)</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="ex">open</span> analysis/figures/bill_length_vs_mass.png</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="co"># View generated figure (Linux)</span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="fu">xdg-open</span> analysis/figures/bill_length_vs_mass.png</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="co"># Load and inspect results in R</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a><span class="ex">R</span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a><span class="ex">results</span> <span class="op">&lt;</span>- readRDS<span class="er">(</span><span class="st">&quot;data/derived_data/bill_analysis_results.rds&quot;</span><span class="kw">)</span></span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a><span class="ex">print</span><span class="er">(</span><span class="ex">results</span><span class="va">$summary_stats</span><span class="kw">)</span></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a><span class="ex">print</span><span class="er">(</span><span class="ex">results</span><span class="va">$model_summary</span><span class="kw">)</span></span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a><span class="ex">quit</span><span class="er">(</span><span class="ex">save</span> = <span class="st">&quot;no&quot;</span><span class="kw">)</span></span></code></pre></div>
</div>
</div>
<div id="version-control-integration" class="section level1">
<h1>Version Control Integration</h1>
<p>Commit the reproducible research workflow to version control:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="co"># Check repository status</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a><span class="fu">git</span> status</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="co"># Stage all modifications</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a><span class="co"># Create descriptive commit</span></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">&quot;Implement Palmer Penguins bill dimension analysis</span></span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" tabindex="-1"></a><span class="st">- Add raw data with comprehensive validation tests</span></span>
<span id="cb29-11"><a href="#cb29-11" tabindex="-1"></a><span class="st">- Develop prepare_penguin_data() function with unit tests</span></span>
<span id="cb29-12"><a href="#cb29-12" tabindex="-1"></a><span class="st">- Implement bill dimension analysis with linear models</span></span>
<span id="cb29-13"><a href="#cb29-13" tabindex="-1"></a><span class="st">- Generate publication-quality visualizations</span></span>
<span id="cb29-14"><a href="#cb29-14" tabindex="-1"></a><span class="st">- Document data provenance and transformations</span></span>
<span id="cb29-15"><a href="#cb29-15" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" tabindex="-1"></a><span class="st">Tests: All 23 tests passing</span></span>
<span id="cb29-17"><a href="#cb29-17" tabindex="-1"></a><span class="st">Coverage: Complete coverage of data preparation code&quot;</span></span>
<span id="cb29-18"><a href="#cb29-18" tabindex="-1"></a></span>
<span id="cb29-19"><a href="#cb29-19" tabindex="-1"></a><span class="co"># Push to remote repository (if configured)</span></span>
<span id="cb29-20"><a href="#cb29-20" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre></div>
</div>
<div id="workflow-summary" class="section level1">
<h1>Workflow Summary</h1>
<div id="command-reference" class="section level2">
<h2>Command Reference</h2>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="co"># Project initialization</span></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="ex">zzcollab</span> <span class="at">-S</span> <span class="at">-d</span> ~/dotfiles</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="co"># Raw data placement (host environment)</span></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a><span class="fu">cp</span> ~/Downloads/data.csv ~/projects/penguin-analysis/data/raw_data/</span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a><span class="co"># Container entry</span></span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a><span class="bu">cd</span> ~/projects/penguin-analysis</span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a><span class="fu">make</span> docker-zsh</span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" tabindex="-1"></a><span class="co"># Development workflow (within container)</span></span>
<span id="cb30-12"><a href="#cb30-12" tabindex="-1"></a><span class="ex">R</span>                              <span class="co"># Start R session</span></span>
<span id="cb30-13"><a href="#cb30-13" tabindex="-1"></a><span class="fu">devtools::load_all()</span>           <span class="co"># Load project functions</span></span>
<span id="cb30-14"><a href="#cb30-14" tabindex="-1"></a><span class="fu">devtools::test()</span>               <span class="co"># Execute test suite</span></span>
<span id="cb30-15"><a href="#cb30-15" tabindex="-1"></a><span class="bu">source</span><span class="er">(</span><span class="st">&quot;scripts/01_analysis.R&quot;</span><span class="kw">)</span>  <span class="co"># Run analysis</span></span>
<span id="cb30-16"><a href="#cb30-16" tabindex="-1"></a><span class="bu">exit</span>                           <span class="co"># Exit R</span></span>
<span id="cb30-17"><a href="#cb30-17" tabindex="-1"></a></span>
<span id="cb30-18"><a href="#cb30-18" tabindex="-1"></a><span class="co"># Container exit</span></span>
<span id="cb30-19"><a href="#cb30-19" tabindex="-1"></a><span class="bu">exit</span></span>
<span id="cb30-20"><a href="#cb30-20" tabindex="-1"></a></span>
<span id="cb30-21"><a href="#cb30-21" tabindex="-1"></a><span class="co"># Version control (host environment)</span></span>
<span id="cb30-22"><a href="#cb30-22" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb30-23"><a href="#cb30-23" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">&quot;Commit message&quot;</span></span>
<span id="cb30-24"><a href="#cb30-24" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre></div>
</div>
<div id="build-mode-comparison" class="section level2">
<h2>Build Mode Comparison</h2>
<table>
<colgroup>
<col width="23%" />
<col width="14%" />
<col width="44%" />
<col width="17%" />
</colgroup>
<thead>
<tr class="header">
<th>Mode</th>
<th>Packages</th>
<th>Application</th>
<th>Build Time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Fast</td>
<td>9</td>
<td>Rapid prototyping</td>
<td>2 min</td>
</tr>
<tr class="even">
<td>Standard</td>
<td>17</td>
<td>General analyses (recommended)</td>
<td>5 min</td>
</tr>
<tr class="odd">
<td>Comprehensive</td>
<td>47</td>
<td>Complex workflows</td>
<td>15 min</td>
</tr>
</tbody>
</table>
</div>
<div id="data-directory-functions" class="section level2">
<h2>Data Directory Functions</h2>
<table>
<thead>
<tr class="header">
<th>Directory</th>
<th>Function</th>
<th>Modification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>data/raw_data/</td>
<td>Original immutable data</td>
<td>Prohibited</td>
</tr>
<tr class="even">
<td>data/derived_data/</td>
<td>Analysis-ready datasets</td>
<td>Permitted</td>
</tr>
<tr class="odd">
<td>data/metadata/</td>
<td>Documentation files</td>
<td>Permitted</td>
</tr>
<tr class="even">
<td>data/validation/</td>
<td>Quality reports</td>
<td>Permitted</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p>This tutorial has demonstrated a systematic approach to reproducible
research using the ZZCOLLAB framework. Key components include:</p>
<ul>
<li>Containerized computational environment with explicit dependency
management</li>
<li>Separation of immutable raw data from derived analytical
datasets</li>
<li>Comprehensive validation testing for data integrity</li>
<li>Documented data transformation workflows</li>
<li>Version control integration for research provenance</li>
</ul>
<div id="additional-resources" class="section level2">
<h2>Additional Resources</h2>
<p>For advanced topics, consult the following documentation:</p>
<ul>
<li>data/DATA_WORKFLOW_GUIDE.md: Advanced data processing workflows</li>
<li>vignettes/data-analysis-testing.Rmd: Comprehensive testing
guide</li>
<li>ZZCOLLAB_USER_GUIDE.md: Team collaboration workflows</li>
<li>.github/workflows/: Continuous integration configuration</li>
</ul>
</div>
<div id="collaborative-workflow" class="section level2">
<h2>Collaborative Workflow</h2>
<p>Colleagues can reproduce this analysis using the following
procedure:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co"># Clone repository</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/yourname/penguin-analysis.git</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="bu">cd</span> penguin-analysis</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="co"># Enter container environment</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="fu">make</span> docker-zsh</span>
<span id="cb31-7"><a href="#cb31-7" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" tabindex="-1"></a><span class="co"># Execute analysis</span></span>
<span id="cb31-9"><a href="#cb31-9" tabindex="-1"></a><span class="ex">Rscript</span> scripts/01_penguin_bill_analysis.R</span></code></pre></div>
</div>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>Gorman KB, Williams TD, Fraser WR (2014) Ecological Sexual Dimorphism
and Environmental Variability within a Community of Antarctic Penguins
(Genus Pygoscelis). PLoS ONE 9(3): e90081. <a href="https://doi.org/10.1371/journal.pone.0090081" class="uri">https://doi.org/10.1371/journal.pone.0090081</a></p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
